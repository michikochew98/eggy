<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PixiJS Egg</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pixi.js/7.3.2/pixi.min.js"></script>
    <style>
        body {
            margin: 0;
            padding: 0;
            background: linear-gradient(135deg, #87CEEB, #98FB98);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            font-family: Arial, sans-serif;
        }
        #gameContainer {
            border: 3px solid #8B4513;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }
        .instructions {
            position: absolute;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            color: #2F4F4F;
            text-align: center;
            font-size: 18px;
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(255,255,255,0.8);
        }
    </style>
</head>
<body>
    <!-- Instructions text -->
    <div class="instructions">Click and drag the egg!</div>
    <!-- Container for PixiJS canvas -->
    <div id="gameContainer"></div>

    <script>
        // Create the PixiJS application
        const app = new PIXI.Application({
            width: window.innerWidth,
            height: window.innerHeight,
            backgroundColor: 0xF0F8FF,
            antialias: true,
            resizeTo: window
        });

        // Add PixiJS canvas to the DOM
        document.getElementById('gameContainer').appendChild(app.view);

        // Create the egg graphics object
        const egg = new PIXI.Graphics();
        
        // Draw the egg shape with gradient-like effect
        function drawEgg() {
            egg.clear();
            
            // Main egg body (ellipse with modified bottom)
            egg.beginFill(0xFFFFF0); // Cream white
            egg.drawEllipse(0, 0, 80, 100);
            egg.endFill();
            
            // Add some shading
            egg.beginFill(0xF5F5DC, 0.3); // Beige shadow
            egg.drawEllipse(-10, 10, 70, 90);
            egg.endFill();
            
            // Add highlight
            egg.beginFill(0xFFFFFF, 0.6); // White highlight
            egg.drawEllipse(-20, -20, 40, 50);
            egg.endFill();
            
            // Add border
            egg.lineStyle(3, 0xD2691E, 1); // Chocolate brown border
            egg.drawEllipse(0, 0, 80, 100);
            egg.lineStyle(0);
        }

        drawEgg();
        // Add egg to the stage
        app.stage.addChild(egg);

        // Position egg in center of the screen
        egg.x = app.screen.width / 2;
        egg.y = app.screen.height / 2;

        // Make egg interactive and show pointer cursor
        egg.interactive = true;
        egg.buttonMode = true;

        // Create floating particles around the egg
        const particles = [];
        for (let i = 0; i < 10; i++) {
            const particle = new PIXI.Graphics();
            particle.beginFill(0xFFD700, 0.6); // Gold particles
            particle.drawCircle(0, 0, Math.random() * 3 + 2);
            particle.endFill();
            
            // Random initial position and velocity
            particle.x = Math.random() * app.screen.width;
            particle.y = Math.random() * app.screen.height;
            particle.vx = (Math.random() - 0.5) * 2;
            particle.vy = (Math.random() - 0.5) * 2;
            
            particles.push(particle);
            app.stage.addChild(particle);
        }

        // Variables for drag functionality
        let isDragging = false;
        let dragOffset = { x: 0, y: 0 };

        // Global pointermove handler to update egg position
        function onDragMove(e) {
            const position = { x: e.clientX, y: e.clientY };
            egg.x = position.x - dragOffset.x;
            egg.y = position.y - dragOffset.y;
        }

        // Start dragging the egg and add global pointermove listener
        egg.on('pointerdown', (event) => {
            isDragging = true;
            const position = event.data.global;
            dragOffset.x = position.x - egg.x;
            dragOffset.y = position.y - egg.y;
            egg.scale.set(1.1);
            window.addEventListener('pointermove', onDragMove);
        });

        // Stop dragging the egg and remove global listener
        function stopDragging() {
            isDragging = false;
            egg.scale.set(1.0);
            window.removeEventListener('pointermove', onDragMove);
        }
        egg.on('pointerup', stopDragging);
        egg.on('pointerupoutside', stopDragging);

        // Hover effect for egg
        egg.on('pointerover', () => {
            if (!isDragging) {
                egg.scale.set(1.05);
            }
        });

        egg.on('pointerout', () => {
            if (!isDragging) {
                egg.scale.set(1.0);
            }
        });

        // Animation loop for floating effect and particles
        let time = 0;
        app.ticker.add(() => {
            time += 0.02;
            
            // Gentle floating animation when not being dragged
            if (!isDragging) {
                egg.y += Math.sin(time) * 0.5;
                egg.rotation = Math.sin(time * 0.5) * 0.05;
            }
            
            // Animate particles
            particles.forEach(particle => {
                particle.x += particle.vx;
                particle.y += particle.vy;
                
                // Bounce off edges of the screen
                if (particle.x < 0 || particle.x > app.screen.width) {
                    particle.vx *= -1;
                }
                if (particle.y < 0 || particle.y > app.screen.height) {
                    particle.vy *= -1;
                }
                
                // Keep particles in bounds
                particle.x = Math.max(0, Math.min(app.screen.width, particle.x));
                particle.y = Math.max(0, Math.min(app.screen.height, particle.y));
                
                // Add sparkle effect
                particle.alpha = 0.5 + Math.sin(time * 3 + particle.x * 0.01) * 0.3;
            });
        });

        // Resize PixiJS renderer when window size changes
        window.addEventListener('resize', () => {
            app.renderer.resize(window.innerWidth, window.innerHeight);
        });
    </script>
</body>
</html>